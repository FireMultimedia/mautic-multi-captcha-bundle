# Mautic Multi-CAPTCHA Plugin
[![license](https://img.shields.io/packagist/l/koco/mautic-recaptcha-bundle.svg)](LICENSE)
[![mautic](https://img.shields.io/badge/mautic-6-blue.svg)](https://www.mautic.org/mixin/recaptcha/)

This project has been pruned to **ONLY** support Mautic 6.
You _can_ use it with Mautic 5 as well, but we do not officially support this.
Any issues opened from Mautic 5 will be regarded as spam.

## Installation
 1. Execute `composer require firemultimedia/mautic-multi-captcha-bundle` in the main directory of the mautic installation
 2. flush the cache `php bin/console cache:clear`.
 3. Navigate to the Plugins page and click "Install/Upgrade Plugins".

You should now see three new plug-ins.

![plugins](.github/doc/plugins.png "plugins")

## Configuration
### hCaptcha
Collect your keys from [hCaptcha](https://dashboard.hcaptcha.com/sites/new) and place them here:

![hCaptcha config](.github/doc/hcaptcha_config.png "hCaptcha config")

The hCaptcha field in the Mautic form can be configured under the "Properties" tab.

![hCaptcha settings](.github/doc/hcaptcha_settings.png "hCaptcha settings")

### Google reCAPTCHA
Collect your keys from [Google reCAPTCHA](https://www.google.com/recaptcha/admin/create) and place them here:

![Google reCAPTCHA config](.github/doc/recaptcha_config.png "Google reCAPTCHA config")

The Google reCAPTCHA field in the Mautic form can be configured under the "Properties" tab. Google reCAPTCHA will rank traffic and interactions based on a score of 0.0 to 1.0, with a 1.0 being a good interaction and scores closer to 0.0 indicating a good likelihood that the traffic was generated by bots.

![Google reCAPTCHA settings](.github/doc/recaptcha_settings.png "Google reCAPTCHA settings")

### Cloudflare Turnstile
Collect your keys from the [Cloudflare dasboard](https://dash.cloudflare.com/) (under Turnstile -> Add widget) and place them here:

![Cloudflare Turnstile config](.github/doc/turnstile_config.png "Cloudflare Turnstile config")

The Cloudflare Turnstile field in the Mautic form can be configured under the "Properties" tab.

![Cloudflare Turnstile settings](.github/doc/turnstile_settings.png "Cloudflare Turnstile settings")


## Usage in Mautic Form
### hCaptcha
Add the "hCaptcha" field to the form and save changes.

| Explicit consent mode:                                                    | Implicit consent mode:                                                                                               |
|---------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------|
| ![hCaptcha](.github/doc/hcaptcha_preview.png "Mautic Form with hCaptcha") | ![hCaptcha implied consent](.github/doc/hcaptcha_preview_implicit.png "Mautic Form with hCaptcha (implied consent)") |

### Google reCAPTCHA v2
Add the "Google reCAPTCHA" field to the form and save changes.


| Explicit consent mode:                                                                             | Implicit consent mode:                                                                                                                        |
|----------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| ![Google reCAPTCHA v2](.github/doc/recaptchav2_preview.png "Mautic Form with Google reCAPTCHA v2") | ![Google reCAPTCHA v2 implied consent](.github/doc/recaptchav2_preview_implicit.png "Mautic Form with Google reCAPTCHA v2 (implied consent)") |

### Google reCAPTCHA v3
Add the "Google reCAPTCHA" field to the form and save changes.


| Explicit consent mode:                                                                             | Implicit consent mode:                                                                                                                        |
|----------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| ![Google reCAPTCHA v3](.github/doc/recaptchav3_preview.png "Mautic Form with Google reCAPTCHA v3") | ![Google reCAPTCHA v3 implied consent](.github/doc/recaptchav3_preview_implicit.png "Mautic Form with Google reCAPTCHA v3 (implied consent)") |

### Cloudflare Turnstile
Add the "Cloudflare Turnstile" field to the form and save changes.


| Explicit consent mode:                                                                             | Implicit consent mode:                                                                                                                        |
|----------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------|
| ![Cloudflare Turnstile](.github/doc/turnstile_preview.png "Mautic Form with Cloudflare Turnstile") | ![Cloudflare Turnstile implied consent](.github/doc/turnstile_preview_implicit.png "Mautic Form with Cloudflare Turnstile (implied consent)") |
